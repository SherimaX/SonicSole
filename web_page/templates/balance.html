<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        height: 100vh;
        margin: 0;
        padding: 0;
        font-family: Bradley Hand, cursive;
        background-color: #ffdada;
      }

      h1 {
        font-size: 4.5em;
        margin-top: 2.5em;
        margin-bottom: 3px;
        color: #8a0000;
      }

      .buttons {
        margin-top: 4em;
        margin-bottom: 5em;
      }

      button {
        padding: 10px 20px;
        font-size: 1.3em;
        color: #fff;
        background-color: #8a0000;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
        margin-top: 10px;
        font-family: Bradley Hand, cursive;
      }
      button:hover {
        background-color: #210000;
      }
      button:active {
        transform: scale(0.95);
      }

      a {
        display: inline-block;
        margin-top: 20px;
        font-size: 1.3em;
        color: #310000;
        text-decoration: none;
        border: 2px solid #310000;
        padding: 10px 20px;
        border-radius: 5px;
        transition: background-color 0.3s, color 0.3s;
      }
      a:hover {
        background-color: #310000;
        color: #fff;
      }

      .Time {
        margin-bottom: 4em;
      }

      /* Modal styles */
      .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
        align-items: center;
        justify-content: center;
      }
      .modal-content {
        background-color: #ffdada;
        margin: auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 10px;
        width: 80%;
        max-width: 400px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        text-align: center;
      }
      .close {
        color: #333;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
      }
      .close:hover,
      .close:focus {
        color: #555;
        text-decoration: none;
        cursor: pointer;
      }
      .modal-content p {
        color: #333;
        font-size: 1.2em;
        margin: 20px 0;
        text-align: center;
      }
      .modal-content button {
        font-size: 1em;
        padding: 10px 20px;
        background-color: #333;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
      }
      .modal-content button:hover {
        background-color: #555;
      }

      .information {
        font-size: 1.3em;
        text-align: center;
      }

      .error {
        color: red;
      }

      input[type="text"] {
        padding: 10px;
        font-size: 1.3em;
        border: 2px solid #210000;
        border-radius: 5px;
        margin-bottom: 10px;
        width: 250px;
        font-family: Bradley Hand, cursive;
      }

      .content {
        display: none;
      }

      .a {
        text-align: center;
      }
    </style>
    <script>
      function fetchData() {
        fetch("/balancing")
          .then((response) => response.json())
          .then((data) => {
            document.getElementById("balanceDataLocation").innerText =
              data.data;
          });
      }

      window.onload = function () {
        fetchData();
        setInterval(fetchData, 100);
      };

      function openModal() {
        document.getElementById("instructionsModal").style.display = "flex";
      }

      function closeModal() {
        document.getElementById("instructionsModal").style.display = "none";
      }

      function submitForm(event) {
        event.preventDefault(); // Prevent form submission
        var form = document.getElementById("name-form");
        var formData = new FormData(form);
        fetch("/submit", {
          method: "POST",
          body: formData,
        }).then((response) => {
          if (response.ok) {
            document.querySelector(".content").style.display = "block";
          }
        });
      }

      document.addEventListener("DOMContentLoaded", function () {
        document
          .getElementById("name-form")
          .addEventListener("submit", submitForm);

        document
          .getElementById("startButton")
          .addEventListener("click", function () {
            fetch("/button_click", { method: "POST" })
              .then((response) => response.json())
              .then((data) => console.log(data.status))
              .catch((error) => console.error("Error:", error));
          });
      });
    </script>
  </head>
  <body>
    <h1>Balancing Activity</h1>
    <form id="name-form">
      <input type="text" name="name" id="name-input" placeholder="Enter Name" />
      <input type="checkbox" name="eyesOpen" id="checkbox-input" value="0"/>
      <input type="submit" style="display: none" />
      <button type="submit">Submit</button>
    </form>
    <div class="content">
      <div class="buttons">
        <button id="startButton">Start Balancing</button>
        <button onclick="openModal()">Instructions</button>
        <div id="instructionsModal" class="modal">
          <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Instructions</h2>
            <p>
              Press the "Start Balancing" button. Then, close your eyes and lift
              one of your legs up and off the ground. Keep balancing on your one
              leg for as long as you can. As soon as your foot touches the
              ground, your SonicSole should detect the force and the timer
              should stop.
            </p>
          </div>
        </div>
      </div>
      <div style="text-align: center;">
      <div id="balanceDataLocation">
        <p class="information">Data</p>
      </div>
      </div>
      <div style="text-align: center;">
      <a href="/bScoreboard">Balancing Scoreboard</a>
    </div>
    </div>
      <a href="/">Home</a>
  </body>
</html>
