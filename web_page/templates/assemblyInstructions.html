<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Assembly Instructions</title>
  <style>
    :root {
      --primary-color: #8a0000;
      --accent-color: #ffdada;
      --light-color: #fafafa;
      --text-dark: #310000;
      --gray: #666;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--accent-color);
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      font-size: 3.5rem;
      margin: 2rem 0 1rem;
      color: var(--primary-color);
    }

    .panels {
      width: 90%;
      max-width: 1200px;
    }

    .panel-container {
      display: flex;
      flex-direction: row;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      gap: 1.5rem;
      padding-bottom: 3rem;
    }

    .panel {
      flex: 0 0 100%;
      background: var(--light-color);
      border-radius: 15px;
      padding: 2rem;
      scroll-snap-align: start;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
      text-align: center;
    }

    .panel h3 {
      font-size: 2rem;
      color: var(--primary-color);
      margin-bottom: 1rem;
    }

    .panel p {
      font-size: 1.2rem;
      color: var(--gray);
      margin-bottom: 1.2rem;
    }

    .clickable {
      color: var(--primary-color);
      text-decoration: underline;
      cursor: pointer;
    }

    .clickable:hover {
      color: var(--text-dark);
    }

    .buttons, button, a {
      font-size: 1.1rem;
      padding: 0.6rem 1.2rem;
      margin: 0.5rem;
      border: none;
      border-radius: 8px;
      background-color: white;
      color: var(--primary-color);
      border: 2px solid var(--primary-color);
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    button:hover, a:hover {
      background-color: var(--primary-color);
      color: white;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
    background-color: var(--accent-color);
    padding: 1.5rem;
    border-radius: 12px;
    width: 90%;
    max-width: 400px; /* Shrink modal width */
    position: relative;
  }


    .modal-content h2 {
      color: var(--primary-color);
      margin-bottom: 1rem;
    }

    .modal-content p {
      font-size: 1.1rem;
      color: var(--gray);
    }

    .modal-content img {
      width: 100%;
      max-height: 250px; /* Limit height */
      object-fit: contain;
      margin-top: 1rem;
      border-radius: 10px;
    }


    .close {
      position: absolute;
      top: 10px;
      right: 16px;
      font-size: 1.8rem;
      color: var(--primary-color);
      cursor: pointer;
    }

    .gifTwo, .gifFour,.gifFive, .gifSeven, .imgSix {
      width: 300px;
      height: 200px;
      margin: 1rem auto;
      background-size: auto 250px;
      background-position: center -50px;
      background-repeat: no-repeat;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    


    .gifTwo { background-image: url('/static/image16.gif'); }
    .gifFour { background-image: url('/static/image19.gif'); }
    .gifFive { background-image: url('/static/image13.gif'); }
    .gifSeven { background-image: url('/static/image15.gif'); }
    .imgSix {
      width: 175px;
      height: 260px;
      background-image: url('/static/image0.jpeg');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: top center;
      margin-top: 2rem;
    }


    #data-window1, #data-window2 {
      background: #fff;
      padding: 1rem;
      border-radius: 10px;
      margin: 1rem auto;
      width: 80%;
      max-width: 500px;
      text-align: center;
      border: 1px solid #ccc;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      font-size: 1rem;
    }

    .infodata {
      font-weight: bold;
      font-size: 1.1rem;
      color: var(--primary-color);
      margin-top: 1rem;
    }

    @media (max-width: 768px) {
      .panel h3 {
        font-size: 1.6rem;
      }

      .panel p, button, a {
        font-size: 1rem;
      }
    }
    .material-list {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.7rem;
      margin-top: 1rem;
    }

    .material-list div {
      font-size: 1.1rem;
      padding: 0.6rem 1.2rem;
      background-color: white;
      color: var(--primary-color);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      text-align: center;
    }

    .material-list div:hover {
      background-color: var(--primary-color);
      color: white;
    }

  </style>
  <script>
    function fetchData() {
      fetch("/color_data")
        .then(res => res.json())
        .then(data => {
          document.getElementById("data-window1").style.backgroundColor = `rgb(${data.R_heel}, ${data.G_heel}, 0)`;
          document.getElementById("data-window2").style.backgroundColor = `rgb(${data.R_fore}, ${data.G_fore}, 0)`;
        });
    }

    window.onload = () => setInterval(fetchData, 200);

    function openModal(id) {
      document.getElementById(id).style.display = "flex";
    }

    function closeModal(id) {
      document.getElementById(id).style.display = "none";
    }
  </script>
</head>
<body>
  <h1>Assembly Instructions</h1>
  <div class="panels">
    <div class="panel-container">
      <div class="panel">
        <h3>Introduction</h3>
        <p>
          The kit is composed of an insole and the <span class="clickable" onclick="openModal('hardwareModal')">hardware assembly</span>.
          It includes a vibration motor, force sensor, and inertial measurement unit (IMU).
        </p>
        <h3>Learning Objectives</h3>
        <p>Students will learn how to assemble their kit and understand the purpose of each component.</p>
      </div>

      <div class="panel">
        <h3>Materials</h3>
        <div class="material-list">
          <div>Shoe Insole</div>
          <div class="clickable" onclick="openModal('hardwareModal')">Hardware Assembly</div>
          <div class="clickable" onclick="openModal('logicModal')">Logic Board</div>
          <div>Scissors and Tape</div>
        </div>
      </div>
      

      <div class="panel"><h3>Step 1</h3><p>Align your foot on the guide to determine your insole size.</p></div>
      <div class="panel"><h3>Step 2</h3><p>Trim the insole accordingly.</p><div class="gifTwo"></div></div>
      <div class="panel"><h3>Step 3</h3><p>Lay the <span class="clickable" onclick="openModal('hardwareModal')">hardware assembly</span> on the insole.</p></div>
      <div class="panel"><h3>Step 4</h3><p>Align the lower force sensing unit and vibration motor and tape it in place. The lower force sensing unit should rest below your heel.</p><div class="gifFour"></div></div>
      <div class="panel"><h3>Step 5</h3><p>Fold wires as needed and secure them and the upper force sensing unit with tape. The upper force sensing unit should rest below your forefoot.`</p><div class="gifFive"></div></div>
      <div class="panel"><h3>Step 6</h3><p>Tape the rest of the<span class="clickable" onclick="openModal('hardwareModal')">hardware assembly</span> to the insole.</p><div class="imgSix"></div></div>
      <div class="panel"><h3>Step 7</h3><p>Connect to the <span class="clickable" onclick="openModal('logicModal')">logic board</span>.</p><div class="gifSeven"></div></div>

      <div class="panel">
        <h3>Testing!</h3>
        <p class="infodata">Heel Data</p>
        <div id="data-window1"><p></p></div>
        <p class="infodata">Fore Data</p>
        <div id="data-window2"><p></p></div>
        <a href="/">I'm Ready!</a>
      </div>
    </div>
  </div>

  <a href="/">Home</a>

  <div id="hardwareModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('hardwareModal')">&times;</span>
      <h2>Hardware Assembly</h2>
      <p>
        The hardware assembly includes a vibration motor, a force sensing
              unit converting mechanical force into electrical signals, and an
              inertial measurement unit (IMU) which includes a combination of
              sensors like accelerometers (measures acceleration) and gyroscopes (measures orientation and angular velocity). These sensors will be
              used to measure foot pressure and movement during activities.
      </p>
      <img src="{{ url_for('static', filename='Hardware.png') }}" alt="Hardware">
    </div>
  </div>

  <div id="logicModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('logicModal')">&times;</span>
      <h2>Logic Board</h2>
      <p>
        The logic board contains printed circuit boards (PCBs) that controls the
              components in the hardware assmebly. It processes signals from the
              force sensing unit and IMU, and sends data to the computer to display on this website.
      </p>
      <img src="{{ url_for('static', filename='logicBoard.png') }}" alt="Logic Board">
    </div>
  </div>
</body>
</html>
